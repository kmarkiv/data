{% extends "admin.html" %}
{% block body %}

<div class="row">
    <div class="col-lg-8">
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Popularity
            </div>

            <div class="panel-body">
                <div id="viz5" class="graphs"></div>
            </div>
        </div>

         <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Country Distribution
            </div>

            <div class="panel-body">
                <div id="viz6" class="graphs"></div>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> People
            </div>

            <div class="panel-body">
                <table class="table table-striped table-condensed" id="people">
                    <thead>
                    <tr>
                        <th>Person</th>
                         <th>Gender</th>
                        <th>Country</th>
                        <th>Born</th>
                        <th>HPI</th>

                    </tr>
                    </thead>
                    <tbody>
                    {% for log in people %}
                    <tr>
                        <td>{{ log.name }}</td>
                        <td>{{ log.gender }}</td>
                        <td>{{ log.country }}</td>
                        <td>{{ log.birthyear }}</td>
                        <td>{{ log.hpi }}</td>

                    </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>


    </div>
    <div class="col-lg-4">

        <!-- /.panel -->
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Country
                <div class="btn-group pull-right">
                    <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-chevron-down"></i>
                    </button>
                    <ul class="dropdown-menu slidedown">
                        <li>
                            <a href="#">
                                <i class="fa fa-refresh fa-fw"></i> Average
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-refresh fa-fw"></i> Total
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="panel-body">
                <div id="viz2" class="graphs"></div>
            </div>
            <!-- /.panel-body -->
        </div>
        <div class="panel panel-default">
            <div class="panel-heading">
                <i class="fa fa-bar-chart-o fa-fw"></i> Gender
                <div class="btn-group pull-right">
                    <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-chevron-down"></i>
                    </button>
                    <ul class="dropdown-menu slidedown">
                        <li>
                            <a href="#">
                                <i class="fa fa-refresh fa-fw"></i> Average
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <i class="fa fa-refresh fa-fw"></i> Total
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="panel-body">
                <div id="viz" class="graphs"></div>
            </div>
            <!-- /.panel-body -->
        </div>
        <!-- /.panel -->

        <!-- /.panel .chat-panel -->
    </div>

</div>


{% endblock %}

{% block js %}
<script src="/static/sb-admin/datatables/media/js/jquery.dataTables.min.js"></script>
<script src="/static/sb-admin/datatables-plugins/integration/bootstrap/3/dataTables.bootstrap.min.js"></script>
<script>


function draw_pie(element,data)
{

d3plus.viz()
    .container("#"+element)
    .data(data)
    .type("pie")
    .id("name")
    .size("value")
    .draw()
}

function draw_tree(element,data)
{

d3plus.viz()
    .container("#"+element)
    .data(data)
    .type("donut")
    .id("name")
    .size("value")
    .draw()
}
  var gender_data = [
  {% for log in gender %}
   {"value": {{ log.counts }}, "name": "{{ log.gender }}"},
   {% endfor %}
  ];




    $(document).ready(function() {
        $('#people').DataTable({
                responsive: true
        });
        draw_pie("viz",gender_data);
        draw_tree("viz2",country_data);
    });



     var country_data = [
  {% for log in country %}
   {"value": {{ log.counts }}, "name": "{{ log.country }}"},
   {% endfor %}
  ];

  function draw_line(element,data)
{

d3plus.viz()
    .container("#"+element)
    .data(data)
    .type("line")
    .id("name")
    .size("value")
    .draw()
}

var h_data = [
  {% for log in domain %}
  {% if "all" == log.country %}
   {"hpi_sum": {{ log.hpi_sum }}, "name": "{{ log.country }}","year":{{log.year}}},
   {% endif %}
   {% endfor %}
  ];

  // instantiate d3plus
  var visualization = d3plus.viz()
    .container("#viz5")  // container DIV to hold the visualization
    .data(h_data)  // data to use with the visualization
    .type("line")       // visualization type
    .id("name")         // key for which our data is unique on
    .text("name")       // key to use for display text
    .y("hpi_sum")         // key to use for y-axis
    .x("year")          // key to use for x-axis
    .draw()             // finally, draw the visualization!


var h_c_data = [
  {% for log in domain %}
  {% if "all" != log.country %}
   {"hpi_percent": {{ log.hpi_percent*100 }}, "name": "{{ log.country }}","year":{{log.year}}},
    {% endif %}
   {% endfor %}

  ];

  // instantiate d3plus
  var visualization = d3plus.viz()
    .container("#viz6")  // container DIV to hold the visualization
    .data(h_c_data)  // data to use with the visualization
    .type("line")       // visualization type
    .id("name")         // key for which our data is unique on
    .text("name")       // key to use for display text
    .y("hpi_percent")         // key to use for y-axis
    .x("year")          // key to use for x-axis
    .draw()









</script>
{% endblock %}




